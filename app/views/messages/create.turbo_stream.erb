<turbo-stream action="append" target="messages">
  <template>
    <%= render partial: "messages/message",
               formats: [:html],
               locals: {
                 message: @message,
                 sender_id: current_user.id # â† JSãŒå·¦å³åˆ¤å®šã™ã‚‹ãŸã‚ã«é€ä¿¡è€…IDã‚’æ˜ç¤º
               } %>
  </template>
</turbo-stream>

<turbo-stream action="replace" target="message_form">
  <template>
    <div id="message_form">
      <%= form_with(model: [@chat_room, Message.new],
                    html: { id: "message_form" }) do |form| %>
        <%= form.text_area :content, rows: 2, class: "w-full border rounded p-2" %>
        <%= form.submit "é€ä¿¡",
                        class: "mt-1 px-4 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 transition" %>
      <% end %>
    </div>
  </template>
</turbo-stream>

<turbo-stream action="invoke" target="messages">
  <template>
    <script>
      // ğŸ“œ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ä¸‹ã«å›ºå®šï¼ˆå†æç”»æ™‚ï¼‰
      const messagesDiv = document.getElementById("messages");
      if (messagesDiv) {
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
      }
    </script>
  </template>
</turbo-stream>
